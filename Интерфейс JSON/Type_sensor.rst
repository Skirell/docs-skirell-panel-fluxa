Тип sensor (Датчики)
====================

.. image:: /images/sensor/blocks.png

Блок **sensor** отображает данные с датчиков. Подтипов не имеет.

Параметры:

* :ref:`sensor-param_1`: название датчика (например: ``Температура``).
* :ref:`sensor-measure`: единица измерения (например: ``°C``).
* :ref:`sensor-min`: минимальное значение(датчика) для цветового индикатора.
* :ref:`sensor-stage_1`: первая граница для цветового индикатора.
* :ref:`sensor-stage_2`: вторая граница для цветового индикатора.
* :ref:`sensor-max`: максимальное значение(датчика) для цветового индикатора.
* :ref:`sensor-color_1`: цвет индикатора для значений ниже stage_1 ``(значение датчика < stage_1)``.
* :ref:`sensor-color_2`: цвет индикатора для значений между stage_1 и stage_2 ``(stage_1 >= значение датчика <= stage_2)``.
* :ref:`sensor-color_3`: цвет индикатора для значений выше stage_2 ``(значение датчика > stage_2)``.
* :ref:`sensor-state_topic`: MQTT-топик обратной связи для получения данных.


Полный пример датчиков с верхнего изображения:
    * :ref:`sensor-full_example`

.. raw:: html

    <br/><br/>
    <br/><br/>


Детальный разбор параметров:
----------------------------

.. _sensor-param_1:
param_1
*******
   Используется для изменения текста названия в самом блоке, например, чтобы указать, что это тип датчика: «Температура», «Влажность» и т.д. Может применяться и в других целях.

   :имя поля: ``param_1``
   :тип объекта: ``String``
   :наличие значения: Может быть пустым
   :ограничение строки: 17 символов
   :пример-1: ``"param_1":"Температура"``
   :пример-2: ``"param_1":"Влажность"``
   :пример-3: ``"param_1":"Углекислый газ"``

.. image:: /images/sensor/param_1.png
.. raw:: html

    <br/><br/>
    <br/><br/>


.. _sensor-measure:
measure
*******
   Используется для изменения текста единицы измерения в самом блоке, например, чтобы указать, что это единица измерения «°C» или «%». Может применяться и в других целях.

   :имя поля: ``measure``
   :тип объекта: ``String``
   :наличие значения: Может быть пустым
   :ограничение строки: 5 символов
   :пример-1: ``"measure":"°C"``
   :пример-2: ``"measure":"%"``
   :пример-3: ``"measure":"ppm"``

.. image:: /images/sensor/measure.png
.. raw:: html

    <br/><br/>
    <br/><br/>


.. _sensor-min:
min
*******
   Задаёт минимальное значение шкалы кругового индикатора в самом блоке.

   :имя поля: ``min``
   :тип объекта: ``String``
   :наличие значения: Обязательно
   :ограничение строки: Нет ограничения
   :пример: ``"min":"0"``

.. raw:: html

    <br/><br/>
    <br/><br/>

.. _sensor-stage_1:
stage_1
*******
   Задаёт первую пороговую границу шкалы кругового индикатора в самом блоке. Используется для определения цветового состояния кругового индикатора при сравнении с текущим значением датчика.

   :имя поля: ``stage_1``
   :тип объекта: ``String``
   :наличие значения: Обязательно
   :ограничение строки: Нет ограничения
   :пример: ``"min":"33"``

.. raw:: html

    <br/><br/>
    <br/><br/>

.. _sensor-stage_2:
stage_2
*******
   Задаёт вторую пороговую границу шкалы кругового индикатора в самом блоке. Используется для определения цветового состояния кругового индикатора при сравнении с текущим значением датчика.

   :имя поля: ``stage_2``
   :тип объекта: ``String``
   :наличие значения: Обязательно
   :ограничение строки: Нет ограничения
   :пример: ``"min":"66"``

.. raw:: html

    <br/><br/>
    <br/><br/>

.. _sensor-max:
max
*******
   Задаёт максимальное значение шкалы кругового индикатора в самом блоке.

   :имя поля: ``max``
   :тип объекта: ``String``
   :наличие значения: Обязательно
   :ограничение строки: Нет ограничения
   :пример: ``"min":"100"``

.. raw:: html

    <br/><br/>
    <br/><br/>


.. _sensor-color_1:
color_1
*******
   Устанавливает указанный цвет кругового индикатора при значении меньше ``stage_1``. Аналогичный вариант описания ``(значение датчика < stage_1) == color_1``.

   :имя поля: ``color_1``
   :тип объекта: ``String``
   :наличие значения: Обязательно
   :ограничение строки: Нет ограничения
   :пример-1: ``"color_1":"color_blue"``
   :пример-2: ``"color_1":"color_green"``

.. image:: /images/sensor/color_1.png
.. raw:: html

    <br/><br/>
    <br/><br/>


.. _sensor-color_2:
color_2
*******
   Устанавливает указанный цвет кругового индикатора при значении в диапазоне от ``stage_1`` до ``stage_2`` включительно. Аналогичный вариант описания ``(stage_1 >= значение датчика <= stage_2) == color_2``.

   :имя поля: ``color_2``
   :тип объекта: ``String``
   :наличие значения: Обязательно
   :ограничение строки: Нет ограничения
   :пример-1: ``"color_2":"color_green"``
   :пример-2: ``"color_2":"color_yellow"``

.. image:: /images/sensor/color_2.png
.. raw:: html

    <br/><br/>
    <br/><br/>


.. _sensor-color_3:
color_3
*******
   Устанавливает указанный цвет кругового индикатора при значении больше ``stage_2``. Аналогичный вариант описания ``(значение датчика > stage_2) == color_3``.

   :имя поля: ``color_3``
   :тип объекта: ``String``
   :наличие значения: Обязательно
   :ограничение строки: Нет ограничения
   :пример: ``"color_3":"color_red"``

.. image:: /images/sensor/color_3.png
.. raw:: html

    <br/><br/>
    <br/><br/>


.. _sensor-state_topic:
state_topic
*******
   MQTT-топик обратной связи, куда приходят сообщения показаний с датчика.

   :имя поля: ``state_topic``
   :тип объекта: ``String``
   :наличие значения: Обязательно
   :ограничение строки: Нет ограничения
   :пример: ``"state_topic":"panel/sensor/1/state"``

.. raw:: html

    <br/><br/>
    <br/><br/>


.. _sensor-full_example:
Полный пример датчиков
---------------------------------
Пример::

    {
        "screens": [
            {
                "page": 1,
                "blocks": [
                    {
                        "block": 1,
                        "type": "sensor",
                        "data": {
                            "param_1": "Температура",
                            "measure": "°C",
                            "min": "10",
                            "stage_1": "20",
                            "stage_2": "30",
                            "max": "40",
                            "color_1": "color_blue",
                            "color_2": "color_green",
                            "color_3": "color_red",
                            "state_topic": "panel/sensor/1/state"
                        }
                    },
                    {
                        "block": 2,
                        "type": "sensor",
                        "data": {
                            "param_1": "Влажность",
                            "measure": "%",
                            "min": "20",
                            "stage_1": "40",
                            "stage_2": "60",
                            "max": "80",
                            "color_1": "color_green",
                            "color_2": "color_yellow",
                            "color_3": "color_red",
                            "state_topic": "panel/sensor/2/state"
                        }
                    },
                    {
                        "block": 3,
                        "type": "sensor",
                        "data": {
                            "param_1": "Углекислый газ",
                            "measure": "ppm",
                            "min": "400",
                            "stage_1": "800",
                            "stage_2": "1200",
                            "max": "2000",
                            "color_1": "color_green",
                            "color_2": "color_yellow",
                            "color_3": "color_red",
                            "state_topic": "panel/sensor/3/state"
                        }
                    },
                    {
                        "block": 4,
                        "type": "sensor",
                        "data": {
                            "param_1": "Качество воздуха",
                            "measure": "ppb",
                            "min": "0",
                            "stage_1": "200",
                            "stage_2": "500",
                            "max": "1000",
                            "color_1": "color_green",
                            "color_2": "color_yellow",
                            "color_3": "color_red",
                            "state_topic": "panel/sensor/4/state"
                        }
                    }
                ]
            }
        ]
    }