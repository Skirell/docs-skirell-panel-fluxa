.. _описание-блоков:
Взаимодействие с блоками
========================

Сценарии (режимы)
-----------------

Блоки, отвечающие за сценарии (режимы), при кратковременном нажатии отправляют команду для активации соответствующего сценария. Настройка сценария выполняется на внешних устройствах (например, на контроллере умного дома). Панель лишь отправляет команду об активации (при нажатии) сценария. 
 
.. image:: /images/new/main.png

Освещение
-----------------

Блоки, отвечающие за освещение, работают как переключатели. Короткое нажатие на блок изменяет состояние устройства («Вкл»/«Выкл»). Иконка блока при включенном состоянии подсвечивается желтым цветом, а при выключенном возвращается к исходному белому. Состояние устройства дополнительно отображается текстом («Вкл»/«Выкл») в нижней части блока. Рядом с состоянием находится текущее значение яркости, если устройство поддерживает эту функцию.
 
.. image:: /images/new/main-light.png

Если устройство поддерживает регулировку яркости, RGB или температуры цвета, длительное нажатие на блок открывает страницу расширенных настроек. На этой странице переключение состояния устройства выполняется с помощью переключателя в правом верхнем углу экрана: при включенном состоянии переключатель подсвечивается ярким светлым оттенком, а круг внутри находится справа; при выключенном — становится тусклым, а круг перемещается влево.

 
Управление яркостью
^^^^^^^^^^^^^^^^^^^^^^^^^

Если устройство поддерживает только регулировку яркости, страница настроек отображается согласно рисунку ниже. Яркость регулируется горизонтальным ползунком. Текущее или выбранное пользователем значение яркости отображается текстом над ползунком (например, «Яркость · 70%»). При перемещении ползунка текст обновляется в реальном времени, а после отпускания ползунка новое значение яркости отправляется на устройство освещения.
 
.. image:: /images/new/light-bright.png

Управление температурой цвета
^^^^^^^^^^^^^^^^^^^^^^^^^

Если устройство поддерживает регулировку яркости и температуры цвета, страница настроек отображается согласно рисунку ниже. 
 
.. image:: /images/new/light-temp-bright.png

Яркость и температура цвета регулируются с помощью горизонтальных ползунков. Текущее или выбранное пользователем значение яркости или температуры цвета отображается текстом над ползунком (например: «Яркость · 100%», «Температура · 3760K»). При перемещении ползунка текст значения обновляется в реальном времени, а после отпускания ползунка новое значение яркости или температуры цвета отправляется на устройство освещения. Для удобства под ползунком температуры расположены кнопки быстрого выбора температуры цвета:

*	Крайняя левая кнопка — теплый цвет. 
*	Центральная кнопка — базовый дневной цвет. 
*   Крайняя правая кнопка — холодный цвет.


Управление RGB-цветом
^^^^^^^^^^^^^^^^^^^^^^^^^

Если устройство поддерживает регулировку RGB-цвета в дополнение к яркости, страница настроек отображается согласно рисунку ниже.

.. image:: /images/new/light-rgb-1.png

В правой части экрана располагается блок навигации для переключения между вариантами выбора настроек цвета.

Первая страница: Яркость регулируется горизонтальным ползунком. Текущее или выбранное пользователем значение яркости отображается текстом над ползунком (например, «Яркость · 70%»). При перемещении ползунка текст обновляется в реальном времени, а после отпускания ползунка новое значение яркости отправляется на устройство освещения. Под горизонтальным ползунком яркости находится палитра основных цветов. Для выбора RGB-цвета достаточно однократно нажать на желаемый цвет. После нажатия на выбранном цвете в течение секунды отображается галочка, подтверждающая выбор. 

Вторая страница: На ней отображается цветовая схема. Для выбора RGB-цвета необходимо зажать круговую диаграмму и переместить курсор к нужному цвету, затем отпустить. После отпускания, выбранный цвет отправляется устройству.
 
.. image:: /images/new/light-rgb-2.png

Третья страница: На ней отображается палитра готовых цветов. Для выбора RGB-цвета достаточно однократно нажать на желаемый цвет. После нажатия на выбранном цвете в течение секунды отображается галочка, подтверждающая выбор. После отпускания, выбранный цвет отправляется устройству.

.. image:: /images/new/light-rgb-3.png
 

Климат
-----------------
Блоки, отвечающие за климат, при кратковременном нажатии открывают страницу управления. Иконка блока при включенном состоянии подсвечивается цветом, заданным в конфигурации JSON, а при выключенном возвращается к исходному белому. Состояние устройства дополнительно отображается текстом («Вкл», «Выкл» или иконка режима) в нижней части блока, рядом с которым указывается текущее значение (температуры, влажности, CO2 и т.д.).
 
.. image:: /images/new/main-climate.png

Поддерживаются два типа климатических устройств: термостаты и кондиционеры.

Термостат
^^^^^^^^^^^^^^^^^^^^^^^^^

Термостат поддерживает два состояния: «Вкл» и «Выкл». Переключение состояния выполняется с помощью переключателя в правом верхнем углу экрана: при включенном состоянии переключатель подсвечивается ярким светлым оттенком, а круг внутри находится справа; при выключенном — становится тусклым, а круг перемещается влево. 
 
.. image:: /images/new/climate-termostate.png
 
Регулировка заданного значения (уставки) осуществляется с помощью кругового ползунка. Ниже ползунка крупным текстом отображается установленное значение, выбранное пользователем или заданное устройством. Текст при перемещении ползунка обновляется в реальном времени, новое значение отправляется на устройство после отпускания ползунка. При наличии дополнительных датчиков, они отображаются ниже установленного значения.

Кондиционер
^^^^^^^^^^^^^^^^^^^^^^^^^

Кондиционер поддерживает несколько режимов работы. Переключение режимов осуществляется через блок выбора режимов, расположенный в нижней части экрана. При наличии дополнительных настроек выше кругового ползунка отображается блок для выбора скорости вентиляции. Выбор режима или скорости выполняется однократным нажатием на соответствующую иконку. Текущий режим подсвечивается более светлым оттенком и визуально уменьшается в размере.

.. image:: /images/new/climate-cond.png

Регулировка заданного значения (уставки) осуществляется с помощью кругового ползунка. Ниже ползунка крупным текстом отображается установленное значение, выбранное пользователем или заданное устройством. Ниже установленного значения отображается текущая температура, а также название текущего режима. Текст при перемещении ползунка обновляется в реальном времени, новое значение отправляется на устройство после отпускания ползунка.

Занавесы
-----------------

Блоки, отвечающие за занавесы, при кратковременном нажатии открывают страницу управления. Если занавес находится в открытом состоянии, то иконка блока подсвечивается синим цветом, а при закрытом состоянии возвращается к исходному белому цвету. Состояние дополнительно отображается текстом («Откр», «Закр») в нижней части блока, рядом с которым указывается текущий процент открытости (например, «20%») и дублируется соответствующей иконкой, которая изменяется в зависимости от состояния.
 
.. image:: /images/new/main-curtain.png

Регулировка процента открытости осуществляется с помощью горизонтального или вертикального ползунка, имитирующего движение занавеса или штор. Над ползунком отображается текст с текущим значением открытости, установленным пользователем или заданным устройством. Текст при перемещении ползунка обновляется в реальном времени, новое значение отправляется на устройство после отпускания ползунка.

Также предусмотрены кнопки для управления состоянием: кнопка с изображением открытых занавесов – отправляет команду для их открытия, кнопка с изображением закрытых занавесов – для их закрытия, кнопка с изображением паузы – останавливает действие.
Занавесы делятся на два типа: горизонтальные и вертикальные, а также на занавесы с ламелями и без них.

*   Горизонтальные занавесы: Открытие осуществляется перемещением курсора (белого круга) от центра к правому,  краю экрана.
*   Вертикальные занавесы: Открытие выполняется перемещением курсора от нижнего края к верхнему краю экрана.

Страницы управления для вертикальных и горизонтальных занавесов без ламелей отображаются согласно рисункам ниже.

.. image:: /images/new/curtain.png
  
Занавесы с ламелями
^^^^^^^^^^^^^^^^^^^^^^^^^

Если устройство поддерживает управление ламелями, рядом с основным ползунком отображается дополнительный ползунок для регулировки угла поворота ламелей. Принцип работы аналогичен основному ползунку. Текст при перемещении ползунка обновляется в реальном времени, новое значение отправляется на устройство после отпускания ползунка.

Текущее значение угла поворота отображается текстом рядом с процентом открытости. Для настройки угла поворота ламелей предусмотрены кнопки, направление которых интуитивно соответствует движению ползунка: уменьшение ползунка задаёт минимальный угол поворота, увеличение — максимальный.

Страницы управления для вертикальных и горизонтальных занавесов с ламелями отображаются согласно рисункам ниже.

.. image:: /images/new/2.png

Датчики
-----------------
Блоки, отвечающие за датчики, выполняют исключительно информативную функцию и не предназначаются для управления. Название датчика и его единица измерения отображаются в нижней части блока. Текущее значение датчика отображается в центре круговой шкалы. Круговая шкала отображает цвет, характерный значению. При достижении значением заданного порога, шкала меняет цвет, в соответствии с этим порогом, заданным в конфигурации.

.. image:: /images/new/sensor.png
 
